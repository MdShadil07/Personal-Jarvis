<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Testing</title>
</head>

<body>



  <script>

    let query = "what is google"
    function callGeminiAPI(query) {
      const API = "AIzaSyCJMsBxB7ADXFxFmDvTsqLPU-0Qx5Ux3S8"; // Replace with your API key
      const api_url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${API}`;

      const request = new XMLHttpRequest();
      request.open("POST", api_url, true);

      // Set headers for JSON content
      request.setRequestHeader("Content-Type", "application/json");

      request.onload = function () {
        if (this.status === 200) {
          const apiResult = JSON.parse(this.responseText);
          console.log("API Result:", apiResult);
        } else {
          console.error(`Gemini API Error: ${this.status} - ${this.responseText}`);
        }
      };

      request.onerror = function () {
        console.error("Request failed.");
      };

      // Correct payload structure
      const requestData = JSON.stringify({
        contents: [
          {
            parts: [
              {
                text: query,
              },
            ],
          },
        ],
      });

      // Send the request
      request.send(requestData);
    }



    // Example call
    callGeminiAPI("Explain how AI works");
    // console.log("Sending request:", requestData);
    // request.send(requestData);

  </script>
</body>

</html>